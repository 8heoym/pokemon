# 스테이지 축소 PRD (Product Requirements Document)

## 🎯 개요

### 문제 정의
- **핵심 문제**: 현재 스테이지 수가 많아 사용자들이 지쳐서 게임을 중단하는 현상 발생
- **영향 범위**: 사용자 유지율 저하, 게임 완주율 감소
- **해결 필요성**: 적절한 난이도 조절로 사용자 경험 개선

### 현재 상황 분석
```
현재 스테이지 구조:
- 2단 (피카츄의 풀숲): 5개 스테이지 → 2개로 축소
- 3단 (꼬부기의 연못): 6개 스테이지 → 2개로 축소
- 4단 (이상해씨의 정원): 7개 스테이지 → 2개로 축소  
- 5단 (루카리오의 바다): 5개 스테이지 → 3개로 축소
- 6단 (뮤츠의 동굴): 8개 스테이지 → 3개로 축소
- 7단 (파이리의 화산): 9개 스테이지 → 3개로 축소
- 8단 (갸라도스의 폭포): 8개 스테이지 → 3개로 축소
- 9단 (뮤의 신전): 10개 스테이지 ✓ (최종 지역, 유지)
```

## 📋 요구사항

### F-1.1 스테이지 수 최적화
- **AS-IS**: 각 지역마다 5~10개의 스테이지
- **TO-BE**: 최종 지역(9단)을 제외하고 5개 이상인 경우 3개로 축소
- **기준**: 첫 번째, 중간, 마지막 스테이지를 대표 스테이지로 선별

### F-1.2 기존 사용자 호환성 보장
- 현재 진행 중인 사용자의 데이터 손실 없음
- 완료된 스테이지 기록 유지
- 새로운 구조로 자동 매핑

### F-1.3 스테이지 선별 기준
```
선별 로직:
- 1번째 스테이지: 지역 입문 (항상 포함)
- 중간 스테이지: 기존 스테이지 중 중앙값 (4개→2번째, 6개→3번째)
- 마지막 스테이지: 지역 완성 (항상 포함)
```

### F-1.4 UX 개선사항
- 축소된 스테이지의 스토리 연결성 유지
- 보상 시스템 재조정 (동일한 총 보상량 유지)
- 시각적 임팩트 증가 (큰 성취감 제공)

## 🔄 데이터 마이그레이션 전략

### M-1 기존 사용자 데이터 보존
```javascript
// 예시: 스테이지 매핑 로직
const STAGE_MAPPING = {
  3: { // 꼬부기의 연못 (6개 → 3개)
    old: [1, 2, 3, 4, 5, 6],
    new: [1, 3, 6], // 1번째, 3번째(중간), 6번째(마지막)
    mapping: { 1→1, 2→1, 3→2, 4→2, 5→3, 6→3 }
  },
  4: { // 이상해씨의 정원 (7개 → 3개)  
    old: [1, 2, 3, 4, 5, 6, 7],
    new: [1, 4, 7], // 1번째, 4번째(중간), 7번째(마지막)
    mapping: { 1→1, 2→1, 3→2, 4→2, 5→2, 6→3, 7→3 }
  }
};
```

### M-2 진행률 계산 로직
- **기존 완료 스테이지**: 새로운 구조에서 동등한 위치로 매핑
- **부분 진행**: 가장 가까운 새로운 스테이지로 이동
- **보상 보상**: 기존에 받은 보상은 모두 유지

## 🎮 게임플레이 영향

### G-1 플레이타임 단축
- **예상 효과**: 지역당 평균 40-60% 플레이타임 단축
- **사용자 만족도**: 성취감 증가, 번아웃 감소
- **완주율**: 예상 20-30% 증가

### G-2 보상 시스템 조정
```
기존: 6개 스테이지 × 작은 보상 = 총 보상량 X
신규: 3개 스테이지 × 큰 보상 = 총 보상량 X (동일)
```

### G-3 스토리 연결성
- 선별된 스테이지들이 지역 스토리의 핵심 포인트 포함
- 생략된 스테이지의 스토리 요소를 선별된 스테이지에 통합

## 📊 성공 지표

### KPI 정의
1. **완주율**: 각 지역 완료 비율 20% 이상 증가
2. **이탈률**: 중간 이탈률 15% 이상 감소  
3. **플레이타임**: 지역당 평균 플레이타임 40-50% 단축
4. **사용자 만족도**: 게임 재미도 평점 향상

### 모니터링 계획
- 사용자 행동 패턴 분석
- 피드백 수집 및 반영

## 🚀 구현 단계

### Phase 1: 데이터 구조 분석 및 설계
- 현재 사용자 데이터 패턴 분석
- 스테이지 매핑 로직 설계
- 호환성 보장 알고리즘 개발

### Phase 2: 백엔드 마이그레이션
- 새로운 스테이지 구조 적용
- 기존 데이터 자동 변환
- API 응답 포맷 업데이트

### Phase 3: 프론트엔드 UI 업데이트  
- AdventureMap 컴포넌트 수정
- 스테이지 템플릿 업데이트
- 사용자 진행률 표시 개선

### Phase 4: QA 및 배포
- 기존 사용자 시나리오 테스트
- 신규 사용자 경험 검증
- 점진적 배포 (카나리 릴리즈)

## 🔒 리스크 관리

### R-1 데이터 손실 위험
- **예방책**: 마이그레이션 전 데이터 백업
- **복구 계획**: 롤백 시나리오 준비
- **검증**: 마이그레이션 후 데이터 정합성 검사

### R-2 사용자 혼란
- **예방책**: 변경사항 사전 안내
- **지원**: FAQ 및 고객지원 준비
- **모니터링**: 초기 사용자 피드백 집중 수집

### R-3 게임 밸런스
- **조정**: 보상 시스템 재밸런싱
- **검증**: 베타 테스터 그룹 운영
- **개선**: 데이터 기반 지속적 튜닝

---
*이 PRD는 사용자 경험 개선과 게임 완주율 향상을 위한 전략적 변경사항을 다룹니다.*